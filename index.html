<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Gerencial - Docks del Puerto Tigre</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #4285f4;
            --primary-red: #ea4335;
            --primary-yellow: #fbbc05;
            --primary-green: #34a853;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--gray-100);
            color: var(--gray-900);
            line-height: 1.5;
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .space-x-4 > * + * { margin-left: 1rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-y-6 > * + * { margin-top: 1.5rem; }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .text-sm { font-size: 0.875rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mr-2 { margin-right: 0.5rem; }
        .mr-4 { margin-right: 1rem; }
        .p-2 { padding: 0.5rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .px-3 { padding: 0 0.75rem; }
        .px-4 { padding: 0 1rem; }
        .px-6 { padding: 0 1.5rem; }
        .py-1 { padding: 0.25rem 0; }
        .py-2 { padding: 0.5rem 0; }
        .py-3 { padding: 0.75rem 0; }
        .py-4 { padding: 1rem 0; }
        .py-8 { padding: 2rem 0; }
        .rounded { border-radius: 0.375rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
        .shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .bg-white { background-color: white; }
        .bg-gray-50 { background-color: var(--gray-50); }
        .bg-gray-100 { background-color: var(--gray-100); }
        .bg-blue-500 { background-color: var(--primary-blue); }
        .bg-green-500 { background-color: var(--primary-green); }
        .bg-red-500 { background-color: var(--primary-red); }
        .bg-yellow-500 { background-color: var(--primary-yellow); }
        .text-white { color: white; }
        .text-gray-500 { color: var(--gray-500); }
        .text-gray-600 { color: var(--gray-600); }
        .text-gray-700 { color: var(--gray-700); }
        .text-gray-900 { color: var(--gray-900); }
        .text-blue-500 { color: var(--primary-blue); }
        .text-green-500 { color: var(--primary-green); }
        .text-green-600 { color: #16a34a; }
        .text-red-500 { color: var(--primary-red); }
        .text-red-600 { color: #dc2626; }
        .text-yellow-500 { color: var(--primary-yellow); }
        .border { border: 1px solid var(--gray-200); }
        .border-b { border-bottom: 1px solid var(--gray-200); }
        .w-full { width: 100%; }
        .min-h-screen { min-height: 100vh; }
        .max-w-md { max-width: 28rem; }
        .max-w-7xl { max-width: 80rem; }
        .mx-auto { margin: 0 auto; }
        .cursor-pointer { cursor: pointer; }
        .overflow-hidden { overflow: hidden; }
        .overflow-x-auto { overflow-x: auto; }
        .grid { display: grid; }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .gap-8 { gap: 2rem; }
        .whitespace-nowrap { white-space: nowrap; }

        @media (min-width: 768px) {
            .md\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
            .md\\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        }

        @media (min-width: 1024px) {
            .lg\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .lg\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
            .lg\\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        }

        /* Custom Components */
        .card {
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            font-size: 0.875rem;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background-color: var(--primary-blue);
            color: white;
        }

        .btn-success {
            background-color: var(--primary-green);
            color: white;
        }

        .btn-danger {
            background-color: var(--primary-red);
            color: white;
        }

        .btn-warning {
            background-color: var(--primary-yellow);
            color: white;
        }

        .input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--gray-200);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }

        .select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--gray-200);
            border-radius: 0.5rem;
            font-size: 1rem;
            background-color: white;
            cursor: pointer;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .table th {
            background-color: var(--gray-50);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--gray-700);
            border-bottom: 2px solid var(--gray-200);
        }

        .table td {
            padding: 1rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .table tr:hover {
            background-color: var(--gray-50);
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-success {
            background-color: #d1fae5;
            color: #065f46;
        }

        .badge-danger {
            background-color: #fee2e2;
            color: #991b1b;
        }

        .badge-warning {
            background-color: #fef3c7;
            color: #92400e;
        }

        .badge-info {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--gray-700);
        }

        .logo-houses {
            display: flex;
            gap: 2px;
            margin-right: 0.5rem;
        }

        .house {
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }

        .house-red { background-color: var(--primary-red); }
        .house-green { background-color: var(--primary-green); }
        .house-yellow { background-color: var(--primary-yellow); }
        .house-blue { background-color: var(--primary-blue); }

        .tab-button {
            padding: 1rem;
            border: none;
            background: none;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .tab-button:hover {
            background-color: var(--gray-50);
        }

        .tab-button.active {
            border-bottom-color: var(--primary-blue);
            color: var(--primary-blue);
            background-color: var(--gray-50);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--gray-700);
        }

        .metric-card {
            background: linear-gradient(135deg, var(--primary-blue), #3367d6);
            color: white;
            border-radius: 1rem;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .metric-card-green {
            background: linear-gradient(135deg, var(--primary-green), #2d8e47);
        }

        .metric-card-red {
            background: linear-gradient(135deg, var(--primary-red), #d33b2c);
        }

        .metric-card-yellow {
            background: linear-gradient(135deg, var(--primary-yellow), #e0a408);
        }

        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--gray-200);
            border-top: 5px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Icons */
        .icon {
            width: 1.25rem;
            height: 1.25rem;
            fill: currentColor;
            margin-right: 0.5rem;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .grid-cols-4 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            
            .table {
                font-size: 0.875rem;
            }
            
            .table th, .table td {
                padding: 0.5rem;
            }
        }
    </style>
  <script src="config/config.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="text-center">
            <div class="spinner mb-4"></div>
            <p class="text-gray-600">Cargando Sistema Gerencial...</p>
        </div>
    </div>

    <!-- Login Section -->
    <div id="loginSection" class="min-h-screen flex items-center justify-center p-4">
        <div class="max-w-md w-full">
            <div class="text-center mb-8">
                <div class="logo justify-center mb-4">
                    <div class="logo-houses">
                        <div class="house house-red"></div>
                        <div class="house house-green"></div>
                        <div class="house house-yellow"></div>
                        <div class="house house-blue"></div>
                    </div>
                    <div>
                        <div>DOCKS DEL PUERTO</div>
                        <div class="text-sm font-normal">TIGRE</div>
                    </div>
                </div>
            </div>
            
            <div class="card p-8">
                <h2 class="text-center text-3xl font-bold text-gray-900 mb-6">
                    Sistema Gerencial
                </h2>
                
                <form id="loginForm" class="space-y-6">
                    <div class="form-group">
                        <label for="username">Usuario Gerente</label>
                        <input id="username" type="text" class="input" placeholder="Ingrese usuario" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Contrase√±a</label>
                        <input id="password" type="password" class="input" placeholder="Ingrese contrase√±a" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary w-full py-3">
                        <span>üîê</span>
                        Acceder al Sistema
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main System -->
    <div id="mainSystem" class="hidden">
        <!-- Header -->
        <header class="bg-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <div class="logo">
                        <div class="logo-houses">
                            <div class="house house-red"></div>
                            <div class="house house-green"></div>
                            <div class="house house-yellow"></div>
                            <div class="house house-blue"></div>
                        </div>
                        <div>
                            <div>DOCKS DEL PUERTO</div>
                            <div class="text-sm font-normal">SISTEMA GERENCIAL</div>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <span class="text-gray-700">Bienvenido, <strong id="currentUser">Gerente</strong></span>
                        <button onclick="logout()" class="btn btn-danger">
                            <span>üö™</span>Salir
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white border-b">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex overflow-x-auto">
                    <button onclick="showSection('dashboard')" class="tab-button active" data-section="dashboard">
                        <span>üìä</span> Dashboard
                    </button>
                    <button onclick="showSection('locales-inversores')" class="tab-button" data-section="locales-inversores">
                        <span>üè¢</span> Locales Inversores
                    </button>
                    <button onclick="showSection('locales-docks')" class="tab-button" data-section="locales-docks">
                        <span>üè™</span> Locales Docks
                    </button>
                    <button onclick="showSection('expensas')" class="tab-button" data-section="expensas">
                        <span>üí∞</span> Expensas
                    </button>
                    <button onclick="showSection('gastos')" class="tab-button" data-section="gastos">
                        <span>üìà</span> Gastos Operativos
                    </button>
                    <button onclick="showSection('reportes')" class="tab-button" data-section="reportes">
                        <span>üìã</span> Reportes
                    </button>
                </div>
            </div>
        </nav>

        <!-- Dashboard Section -->
        <section id="dashboard" class="py-8">
            <div class="max-w-7xl mx-auto px-4">
                <h1 class="text-3xl font-bold text-gray-900 mb-8">Dashboard Ejecutivo</h1>
                
                <!-- KPI Cards -->
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="metric-card">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-sm opacity-90">Total Locales</p>
                                <p class="text-3xl font-bold" id="totalLocales">200</p>
                            </div>
                            <span class="text-2xl">üè™</span>
                        </div>
                    </div>
                    
                    <div class="metric-card metric-card-green">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-sm opacity-90">Ingresos Mes</p>
                                <p class="text-3xl font-bold" id="ingresosMes">$2.5M</p>
                            </div>
                            <span class="text-2xl">üíµ</span>
                        </div>
                    </div>
                    
                    <div class="metric-card metric-card-red">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-sm opacity-90">Expensas Pend.</p>
                                <p class="text-3xl font-bold" id="expensasPendientes">$450K</p>
                            </div>
                            <span class="text-2xl">‚ö†Ô∏è</span>
                        </div>
                    </div>
                    
                    <div class="metric-card metric-card-yellow">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-sm opacity-90">Ocupaci√≥n</p>
                                <p class="text-3xl font-bold" id="ocupacion">92%</p>
                            </div>
                            <span class="text-2xl">üìä</span>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold mb-4">Ingresos por Categor√≠a</h3>
                        <div class="chart-container">
                            <canvas id="incomeChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card p-6">
                        <h3 class="text-xl font-bold mb-4">Gastos Mensuales</h3>
                        <div class="chart-container">
                            <canvas id="expenseChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card p-6">
                    <h3 class="text-xl font-bold mb-4">Actividad Reciente</h3>
                    <div id="recentActivity" class="space-y-4">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Locales Inversores Section -->
        <section id="locales-inversores" class="py-8 hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-900">Locales de Inversores</h1>
                    <button onclick="openModal('investorModal')" class="btn btn-primary">
                        <span>‚ûï</span> Agregar Local
                    </button>
                </div>

                <!-- Filters -->
                <div class="card p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="form-group">
                            <label>Inversor</label>
                            <select id="filterInversor" class="select">
                                <option value="">Todos</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Estado</label>
                            <select id="filterEstado" class="select">
                                <option value="">Todos</option>
                                <option value="Ocupado">Ocupado</option>
                                <option value="Libre">Libre</option>
                                <option value="Mantenimiento">Mantenimiento</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tipo Contrato</label>
                            <select id="filterContrato" class="select">
                                <option value="">Todos</option>
                                <option value="Administraci√≥n">Administraci√≥n</option>
                                <option value="Renta Fija">Renta Fija</option>
                                <option value="Porcentaje">Porcentaje</option>
                            </select>
                        </div>
                        <div class="flex items-end">
                            <button onclick="filterInvestorLocales()" class="btn btn-success w-full">
                                <span>üîç</span> Filtrar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Investor Locales Table -->
                <div class="card overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Local</th>
                                    <th>Inversor</th>
                                    <th>Locatario</th>
                                    <th>M¬≤</th>
                                    <th>Tipo Contrato</th>
                                    <th>Comisi√≥n</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="investorLocalesTable">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Locales Docks Section -->
        <section id="locales-docks" class="py-8 hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-900">Locales Propios Docks</h1>
                    <button onclick="openModal('docksModal')" class="btn btn-primary">
                        <span>‚ûï</span> Agregar Local
                    </button>
                </div>

                <!-- Summary Cards -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-6">
                    <div class="card p-6 text-center">
                        <span class="text-3xl mb-4 block">üè™</span>
                        <h3 class="text-2xl font-bold text-gray-900" id="docksTotal">125</h3>
                        <p class="text-gray-600">Locales Propios</p>
                    </div>
                    <div class="card p-6 text-center">
                        <span class="text-3xl mb-4 block">‚úÖ</span>
                        <h3 class="text-2xl font-bold text-gray-900" id="docksOcupados">98</h3>
                        <p class="text-gray-600">Ocupados</p>
                    </div>
                    <div class="card p-6 text-center">
                        <span class="text-3xl mb-4 block">üí∞</span>
                        <h3 class="text-2xl font-bold text-gray-900" id="docksIngresos">$1.8M</h3>
                        <p class="text-gray-600">Ingresos Directos</p>
                    </div>
                    <div class="card p-6 text-center">
                        <span class="text-3xl mb-4 block">üìà</span>
                        <h3 class="text-2xl font-bold text-gray-900" id="docksRentabilidad">78%</h3>
                        <p class="text-gray-600">Rentabilidad</p>
                    </div>
                </div>

                <!-- Docks Locales Table -->
                <div class="card overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Local</th>
                                    <th>Locatario</th>
                                    <th>Rubro</th>
                                    <th>M¬≤</th>
                                    <th>Alquiler</th>
                                    <th>Estado</th>
                                    <th>Rentabilidad</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="docksLocalesTable">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Expensas Section -->
        <section id="expensas" class="py-8 hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-900">Gesti√≥n de Expensas</h1>
                    <div class="flex space-x-4">
                        <button onclick="generateExpenses()" class="btn btn-success">
                            <span>üßÆ</span> Generar Liquidaci√≥n
                        </button>
                        <button onclick="openModal('expenseModal')" class="btn btn-primary">
                            <span>‚ûï</span> Agregar Gasto
                        </button>
                    </div>
                </div>

                <!-- Expense Summary -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="card p-6">
                        <div class="flex items-center">
                            <span class="text-3xl mr-4">üí∏</span>
                            <div>
                                <h3 class="text-xl font-bold text-gray-900" id="totalExpensas">$785,000</h3>
                                <p class="text-gray-600">Total Expensas Mes</p>
                            </div>
                        </div>
                    </div>
                    <div class="card p-6">
                        <div class="flex items-center">
                            <span class="text-3xl mr-4">‚úÖ</span>
                            <div>
                                <h3 class="text-xl font-bold text-green-600" id="cobrado">$520,000</h3>
                                <p class="text-gray-600">Cobrado (66%)</p>
                            </div>
                        </div>
                    </div>
                    <div class="card p-6">
                        <div class="flex items-center">
                            <span class="text-3xl mr-4">‚è≥</span>
                            <div>
                                <h3 class="text-xl font-bold text-red-600" id="pendiente">$265,000</h3>
                                <p class="text-gray-600">Pendiente (34%)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Expense Categories -->
                <div class="card p-6 mb-8">
                    <h3 class="text-xl font-bold mb-6">Gastos Comunes por Categor√≠a</h3>
                    <div id="expenseCategories" class="space-y-4">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Payment Status -->
                <div class="card overflow-hidden">
                    <div class="p-6 border-b">
                        <h3 class="text-xl font-bold">Estado de Pagos por Local</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Local</th>
                                    <th>Locatario</th>
                                    <th>M¬≤</th>
                                    <th>Coeficiente</th>
                                    <th>Expensa</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="expensesTable">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gastos Operativos Section -->
        <section id="gastos" class="py-8 hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-900">Gastos Operativos</h1>
                    <button onclick="openModal('operationalModal')" class="btn btn-primary">
                        <span>‚ûï</span> Registrar Gasto
                    </button>
                </div>

                <!-- Budget Overview -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                    <div class="card p-6 text-center">
                        <span class="text-3xl mb-4 block">üíº</span>
                        <h3 class="text-2xl font-bold text-gray-900">$950,000</h3>
                        <p class="text-gray-600">Presupuesto</p>
                    </div>
                    <div class="card p-6 text-center">
                        <span class="text-3xl mb-4 block">üí≥</span>
                        <h3 class="text-2xl font-bold text-red-600" id="gastado">$785,500</h3>
                        <p class="text-gray-600">Gastado</p>
                    </div>
                    <div class="card p-6 text-center">
                        <span class="text-3xl mb-4 block">üê∑</span>
                        <h3 class="text-2xl font-bold text-green-600" id="disponible">$164,500</h3>
                        <p class="text-gray-600">Disponible</p>
                    </div>
                    <div class="card p-6 text-center">
                        <span class="text-3xl mb-4 block">üìä</span>
                        <h3 class="text-2xl font-bold text-gray-900" id="ejecucion">83%</h3>
                        <p class="text-gray-600">Ejecuci√≥n</p>
                    </div>
                </div>

                <!-- Operational Expenses Table -->
                <div class="card overflow-hidden">
                    <div class="p-6 border-b">
                        <h3 class="text-xl font-bold">Gastos Recientes</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Concepto</th>
                                    <th>Categor√≠a</th>
                                    <th>Proveedor</th>
                                    <th>Monto</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="operationalTable">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reportes Section -->
        <section id="reportes" class="py-8 hidden">
            <div class="max-w-7xl mx-auto px-4">
                <h1 class="text-3xl font-bold text-gray-900 mb-8">Reportes Ejecutivos</h1>
                
                <!-- Report Options -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card p-6 text-center cursor-pointer" onclick="generateReport('financial')">
                        <span class="text-4xl mb-4 block">üìà</span>
                        <h3 class="text-xl font-bold mb-2">Reporte Financiero</h3>
                        <p class="text-gray-600 mb-4">Ingresos, gastos y rentabilidad</p>
                        <button class="btn btn-primary">
                            <span>üì•</span> Generar
                        </button>
                    </div>
                    
                    <div class="card p-6 text-center cursor-pointer" onclick="generateReport('occupancy')">
                        <span class="text-4xl mb-4 block">üè¢</span>
                        <h3 class="text-xl font-bold mb-2">Reporte de Ocupaci√≥n</h3>
                        <p class="text-gray-600 mb-4">Estado de locales y tendencias</p>
                        <button class="btn btn-success">
                            <span>üì•</span> Generar
                        </button>
                    </div>
                    
                    <div class="card p-6 text-center cursor-pointer" onclick="generateReport('expenses')">
                        <span class="text-4xl mb-4 block">üí∞</span>
                        <h3 class="text-xl font-bold mb-2">Reporte de Expensas</h3>
                        <p class="text-gray-600 mb-4">Liquidaciones y cobros</p>
                        <button class="btn btn-warning">
                            <span>üì•</span> Generar
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modals -->
    <!-- Investor Modal -->
    <div id="investorModal" class="modal hidden">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4">Agregar Local Inversor</h3>
            <form id="investorForm">
                <div class="form-group">
                    <label>N√∫mero de Local</label>
                    <input type="text" id="investorLocalNum" class="input" required>
                </div>
                <div class="form-group">
                    <label>Inversor</label>
                    <input type="text" id="investorName" class="input" required>
                </div>
                <div class="form-group">
                    <label>Locatario</label>
                    <input type="text" id="investorTenant" class="input">
                </div>
                <div class="form-group">
                    <label>Metros Cuadrados</label>
                    <input type="number" id="investorMeters" class="input" required>
                </div>
                <div class="form-group">
                    <label>Tipo de Contrato</label>
                    <select id="investorContractType" class="select" required>
                        <option value="">Seleccione...</option>
                        <option value="Administraci√≥n">Administraci√≥n</option>
                        <option value="Renta Fija">Renta Fija</option>
                        <option value="Porcentaje">Porcentaje</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Comisi√≥n/Valor</label>
                    <input type="text" id="investorCommission" class="input" required>
                </div>
                <div class="form-group">
                    <label>Estado</label>
                    <select id="investorStatus" class="select" required>
                        <option value="Ocupado">Ocupado</option>
                        <option value="Libre">Libre</option>
                        <option value="Mantenimiento">Mantenimiento</option>
                    </select>
                </div>
                <div class="flex space-x-4">
                    <button type="submit" class="btn btn-primary flex-1">Guardar</button>
                    <button type="button" onclick="closeModal('investorModal')" class="btn btn-danger flex-1">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Docks Modal -->
    <div id="docksModal" class="modal hidden">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4">Agregar Local Docks</h3>
            <form id="docksForm">
                <div class="form-group">
                    <label>N√∫mero de Local</label>
                    <input type="text" id="docksLocalNum" class="input" required>
                </div>
                <div class="form-group">
                    <label>Locatario</label>
                    <input type="text" id="docksTenant" class="input">
                </div>
                <div class="form-group">
                    <label>Rubro</label>
                    <input type="text" id="docksRubro" class="input">
                </div>
                <div class="form-group">
                    <label>Metros Cuadrados</label>
                    <input type="number" id="docksMeters" class="input" required>
                </div>
                <div class="form-group">
                    <label>Alquiler Mensual</label>
                    <input type="number" id="docksRent" class="input">
                </div>
                <div class="form-group">
                    <label>Estado</label>
                    <select id="docksStatus" class="select" required>
                        <option value="Ocupado">Ocupado</option>
                        <option value="Libre">Libre</option>
                        <option value="Mantenimiento">Mantenimiento</option>
                    </select>
                </div>
                <div class="flex space-x-4">
                    <button type="submit" class="btn btn-primary flex-1">Guardar</button>
                    <button type="button" onclick="closeModal('docksModal')" class="btn btn-danger flex-1">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Expense Modal -->
    <div id="expenseModal" class="modal hidden">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4">Agregar Gasto Com√∫n</h3>
            <form id="expenseForm">
                <div class="form-group">
                    <label>Concepto</label>
                    <input type="text" id="expenseConcept" class="input" required>
                </div>
                <div class="form-group">
                    <label>Categor√≠a</label>
                    <select id="expenseCategory" class="select" required>
                        <option value="">Seleccione...</option>
                        <option value="Seguridad">Seguridad y Vigilancia</option>
                        <option value="Limpieza">Limpieza General</option>
                        <option value="Servicios">Servicios P√∫blicos</option>
                        <option value="Mantenimiento">Mantenimiento</option>
                        <option value="Administraci√≥n">Administraci√≥n</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Monto</label>
                    <input type="number" id="expenseAmount" class="input" required>
                </div>
                <div class="form-group">
                    <label>Descripci√≥n</label>
                    <textarea id="expenseDescription" class="input" rows="3"></textarea>
                </div>
                <div class="flex space-x-4">
                    <button type="submit" class="btn btn-primary flex-1">Guardar</button>
                    <button type="button" onclick="closeModal('expenseModal')" class="btn btn-danger flex-1">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Operational Modal -->
    <div id="operationalModal" class="modal hidden">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4">Registrar Gasto Operativo</h3>
            <form id="operationalForm">
                <div class="form-group">
                    <label>Fecha</label>
                    <input type="date" id="operationalDate" class="input" required>
                </div>
                <div class="form-group">
                    <label>Concepto</label>
                    <input type="text" id="operationalConcept" class="input" required>
                </div>
                <div class="form-group">
                    <label>Categor√≠a</label>
                    <select id="operationalCategory" class="select" required>
                        <option value="">Seleccione...</option>
                        <option value="Mantenimiento">Mantenimiento</option>
                        <option value="Personal">Personal</option>
                        <option value="Servicios">Servicios</option>
                        <option value="Seguridad">Seguridad</option>
                        <option value="Limpieza">Limpieza</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Proveedor</label>
                    <input type="text" id="operationalProvider" class="input" required>
                </div>
                <div class="form-group">
                    <label>Monto</label>
                    <input type="number" id="operationalAmount" class="input" required>
                </div>
                <div class="form-group">
                    <label>Estado</label>
                    <select id="operationalStatus" class="select" required>
                        <option value="Pendiente">Pendiente</option>
                        <option value="Pagado">Pagado</option>
                    </select>
                </div>
                <div class="flex space-x-4">
                    <button type="submit" class="btn btn-primary flex-1">Guardar</button>
                    <button type="button" onclick="closeModal('operationalModal')" class="btn btn-danger flex-1">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Global Data Storage
        let systemData = {
            users: [
                { username: 'gerente', password: 'admin123', name: 'Gerente General' },
                { username: 'admin', password: 'docks2024', name: 'Administrador' }
            ],
            investorLocales: [
                {
                    id: 1,
                    local: '001',
                    investor: 'Rodriguez S.A.',
                    tenant: 'Caf√© Central',
                    meters: 45,
                    contractType: 'Administraci√≥n',
                    commission: '15%',
                    status: 'Ocupado',
                    expires: 'Mar 2025'
                },
                {
                    id: 2,
                    local: '025',
                    investor: 'Inversiones Delta',
                    tenant: 'Boutique Elegance',
                    meters: 32,
                    contractType: 'Renta Fija',
                    commission: '$120,000',
                    status: 'Ocupado',
                    expires: 'Jun 2025'
                },
                {
                    id: 3,
                    local: '078',
                    investor: 'Grupo Inmobiliario Sur',
                    tenant: '',
                    meters: 28,
                    contractType: 'Porcentaje',
                    commission: '12%',
                    status: 'Libre',
                    expires: ''
                }
            ],
            docksLocales: [
                {
                    id: 1,
                    local: '002',
                    tenant: 'Panader√≠a El Sol',
                    rubro: 'Gastronom√≠a',
                    meters: 38,
                    rent: 95000,
                    status: 'Ocupado',
                    expires: 'Dic 2024',
                    profitability: 85
                },
                {
                    id: 2,
                    local: '015',
                    tenant: 'Farmacia Vital',
                    rubro: 'Salud',
                    meters: 42,
                    rent: 110000,
                    status: 'Ocupado',
                    expires: 'Feb 2025',
                    profitability: 92
                },
                {
                    id: 3,
                    local: '089',
                    tenant: '',
                    rubro: '',
                    meters: 35,
                    rent: 0,
                    status: 'Libre',
                    expires: '',
                    profitability: 0
                }
            ],
            expenses: [
                {
                    id: 1,
                    category: 'Seguridad',
                    concept: 'Seguridad y Vigilancia',
                    description: 'Personal 24hs + Sistema CCTV',
                    amount: 180000,
                    percentage: 23
                },
                {
                    id: 2,
                    category: 'Limpieza',
                    concept: 'Limpieza General',
                    description: '√Åreas comunes + Servicios sanitarios',
                    amount: 145000,
                    percentage: 18
                },
                {
                    id: 3,
                    category: 'Servicios',
                    concept: 'Servicios P√∫blicos',
                    description: 'Electricidad + Agua + Gas',
                    amount: 220000,
                    percentage: 28
                },
                {
                    id: 4,
                    category: 'Mantenimiento',
                    concept: 'Mantenimiento Infraestructura',
                    description: 'Reparaciones + Mejoras',
                    amount: 125000,
                    percentage: 16
                },
                {
                    id: 5,
                    category: 'Administraci√≥n',
                    concept: 'Administraci√≥n',
                    description: 'Honorarios + Gastos operativos',
                    amount: 115000,
                    percentage: 15
                }
            ],
            operationalExpenses: [
                {
                    id: 1,
                    date: '2024-11-20',
                    concept: 'Mantenimiento Aires Acondicionados',
                    category: 'Mantenimiento',
                    provider: 'Climatizaci√≥n Sur',
                    amount: 85000,
                    status: 'Pagado'
                },
                {
                    id: 2,
                    date: '2024-11-18',
                    concept: 'Salarios Personal Seguridad',
                    category: 'Personal',
                    provider: 'Seguridad Total SA',
                    amount: 180000,
                    status: 'Pagado'
                },
                {
                    id: 3,
                    date: '2024-11-15',
                    concept: 'Factura Electricidad',
                    category: 'Servicios',
                    provider: 'EDENOR',
                    amount: 125000,
                    status: 'Pendiente'
                }
            ],
            currentUser: null
        };

        // Initialize system
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from localStorage if exists
            const savedData = localStorage.getItem('docksSystemData');
            if (savedData) {
                systemData = { ...systemData, ...JSON.parse(savedData) };
            }

            // Set today's date for operational form
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('operationalDate').value = today;

            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loadingScreen').style.display = 'none';
            }, 1500);

            // Setup form handlers
            setupForms();
            
            // Initial population of select options
            populateInvestorFilter();
        });

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('docksSystemData', JSON.stringify(systemData));
        }

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            const user = systemData.users.find(u => u.username === username && u.password === password);
            
            if (user) {
                systemData.currentUser = user;
                document.getElementById('currentUser').textContent = user.name;
                document.getElementById('loginSection').classList.add('hidden');
                document.getElementById('mainSystem').classList.remove('hidden');
                
                // Initialize dashboard
                initializeDashboard();
                showSection('dashboard');
            } else {
                alert('Usuario o contrase√±a incorrectos');
            }
        });

        // Logout functionality
        function logout() {
            systemData.currentUser = null;
            document.getElementById('loginSection').classList.remove('hidden');
            document.getElementById('mainSystem').classList.add('hidden');
            document.getElementById('loginForm').reset();
        }

        // Section navigation
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Remove active from all tabs
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.remove('hidden');
            
            // Activate corresponding tab
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');
            
            // Load section-specific data
            switch(sectionName) {
                case 'dashboard':
                    initializeDashboard();
                    break;
                case 'locales-inversores':
                    loadInvestorLocales();
                    break;
                case 'locales-docks':
                    loadDocksLocales();
                    break;
                case 'expensas':
                    loadExpenses();
                    break;
                case 'gastos':
                    loadOperationalExpenses();
                    break;
            }
        }

        // Dashboard initialization
        function initializeDashboard() {
            // Update KPIs
            const totalLocales = systemData.investorLocales.length + systemData.docksLocales.length;
            const ocupados = systemData.investorLocales.filter(l => l.status === 'Ocupado').length + 
                           systemData.docksLocales.filter(l => l.status === 'Ocupado').length;
            const ocupacion = Math.round((ocupados / totalLocales) * 100);
            
            document.getElementById('totalLocales').textContent = totalLocales;
            document.getElementById('ocupacion').textContent = ocupacion + '%';

            // Load recent activity
            loadRecentActivity();
            
            // Initialize charts
            initializeCharts();
        }

        // Load recent activity
        function loadRecentActivity() {
            const container = document.getElementById('recentActivity');
            const activities = [
                {
                    icon: 'üí∞',
                    text: 'Pago recibido - Local 045',
                    time: 'Hace 2 horas',
                    amount: '+$85,000',
                    type: 'income'
                },
                {
                    icon: 'üîß',
                    text: 'Mantenimiento programado - √Årea com√∫n',
                    time: 'Hace 5 horas',
                    amount: '-$25,000',
                    type: 'expense'
                },
                {
                    icon: 'üìã',
                    text: 'Nuevo local registrado - Local 156',
                    time: 'Hace 1 d√≠a',
                    amount: '',
                    type: 'info'
                }
            ];

            container.innerHTML = activities.map(activity => `
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                        <span class="text-2xl mr-3">${activity.icon}</span>
                        <div>
                            <p class="font-semibold">${activity.text}</p>
                            <p class="text-sm text-gray-500">${activity.time}</p>
                        </div>
                    </div>
                    ${activity.amount ? `<span class="font-bold ${activity.type === 'income' ? 'text-green-600' : 'text-red-600'}">${activity.amount}</span>` : ''}
                </div>
            `).join('');
        }

        // Initialize charts
        function initializeCharts() {
            // Simple chart implementation without external libraries
            const incomeChartCanvas = document.getElementById('incomeChart');
            const expenseChartCanvas = document.getElementById('expenseChart');
            
            // Create simple pie chart representation
            createSimpleChart(incomeChartCanvas, 'Ingresos por Categor√≠a');
            createSimpleChart(expenseChartCanvas, 'Gastos Mensuales');
        }

        // Simple chart implementation
        function createSimpleChart(canvas, title) {
            if (!canvas.getContext) return;
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 80;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Sample data
            const data = [
                { label: 'Locales Propios', value: 45, color: '#4285f4' },
                { label: 'Locales Inversores', value: 30, color: '#34a853' },
                { label: 'Expensas', value: 15, color: '#ea4335' },
                { label: 'Otros', value: 10, color: '#fbbc05' }
            ];
            
            let currentAngle = 0;
            
            data.forEach(item => {
                const sliceAngle = (item.value / 100) * 2 * Math.PI;
                
                // Draw slice
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                ctx.lineTo(centerX, centerY);
                ctx.fillStyle = item.color;
                ctx.fill();
                
                currentAngle += sliceAngle;
            });
            
            // Draw legend
            let legendY = 20;
            data.forEach(item => {
                ctx.fillStyle = item.color;
                ctx.fillRect(20, legendY, 15, 15);
                ctx.fillStyle = '#000';
                ctx.font = '12px Arial';
                ctx.fillText(`${item.label} (${item.value}%)`, 40, legendY + 12);
                legendY += 25;
            });
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
            // Reset form
            const form = document.getElementById(modalId).querySelector('form');
            if (form) form.reset();
        }

        // Setup form handlers
        function setupForms() {
            // Investor form
            document.getElementById('investorForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(e.target);
                const newLocal = {
                    id: Date.now(),
                    local: document.getElementById('investorLocalNum').value,
                    investor: document.getElementById('investorName').value,
                    tenant: document.getElementById('investorTenant').value || '',
                    meters: parseInt(document.getElementById('investorMeters').value),
                    contractType: document.getElementById('investorContractType').value,
                    commission: document.getElementById('investorCommission').value,
                    status: document.getElementById('investorStatus').value,
                    expires: ''
                };
                
                systemData.investorLocales.push(newLocal);
                saveData();
                loadInvestorLocales();
                closeModal('investorModal');
                alert('Local agregado exitosamente');
            });

            // Docks form
            document.getElementById('docksForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const newLocal = {
                    id: Date.now(),
                    local: document.getElementById('docksLocalNum').value,
                    tenant: document.getElementById('docksTenant').value || '',
                    rubro: document.getElementById('docksRubro').value || '',
                    meters: parseInt(document.getElementById('docksMeters').value),
                    rent: parseInt(document.getElementById('docksRent').value) || 0,
                    status: document.getElementById('docksStatus').value,
                    expires: '',
                    profitability: 0
                };
                
                systemData.docksLocales.push(newLocal);
                saveData();
                loadDocksLocales();
                closeModal('docksModal');
                alert('Local agregado exitosamente');
            });

            // Expense form
            document.getElementById('expenseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const newExpense = {
                    id: Date.now(),
                    category: document.getElementById('expenseCategory').value,
                    concept: document.getElementById('expenseConcept').value,
                    description: document.getElementById('expenseDescription').value,
                    amount: parseInt(document.getElementById('expenseAmount').value),
                    percentage: 0
                };
                
                systemData.expenses.push(newExpense);
                saveData();
                loadExpenses();
                closeModal('expenseModal');
                alert('Gasto agregado exitosamente');
            });

            // Operational form
            document.getElementById('operationalForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const newExpense = {
                    id: Date.now(),
                    date: document.getElementById('operationalDate').value,
                    concept: document.getElementById('operationalConcept').value,
                    category: document.getElementById('operationalCategory').value,
                    provider: document.getElementById('operationalProvider').value,
                    amount: parseInt(document.getElementById('operationalAmount').value),
                    status: document.getElementById('operationalStatus').value
                };
                
                systemData.operationalExpenses.push(newExpense);
                saveData();
                loadOperationalExpenses();
                closeModal('operationalModal');
                alert('Gasto registrado exitosamente');
            });
        }

        // Load investor locales
        function loadInvestorLocales() {
            const tbody = document.getElementById('investorLocalesTable');
            tbody.innerHTML = systemData.investorLocales.map(local => `
                <tr>
                    <td><strong>${local.local}</strong></td>
                    <td>${local.investor}</td>
                    <td>${local.tenant || '-'}</td>
                    <td>${local.meters} m¬≤</td>
                    <td><span class="badge badge-info">${local.contractType}</span></td>
                    <td>${local.commission}</td>
                    <td><span class="badge ${getStatusBadge(local.status)}">${local.status}</span></td>
                    <td>
                        <button onclick="editLocal('investor', ${local.id})" class="btn btn-warning btn-sm mr-2">
                            ‚úèÔ∏è
                        </button>
                        <button onclick="deleteLocal('investor', ${local.id})" class="btn btn-danger btn-sm">
                            üóëÔ∏è
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Load docks locales
        function loadDocksLocales() {
            const tbody = document.getElementById('docksLocalesTable');
            tbody.innerHTML = systemData.docksLocales.map(local => `
                <tr>
                    <td><strong>${local.local}</strong></td>
                    <td>${local.tenant || '-'}</td>
                    <td>${local.rubro || '-'}</td>
                    <td>${local.meters} m¬≤</td>
                    <td>$${local.rent.toLocaleString()}</td>
                    <td><span class="badge ${getStatusBadge(local.status)}">${local.status}</span></td>
                    <td><span class="font-bold ${local.profitability > 0 ? 'text-green-600' : 'text-red-600'}">${local.profitability}%</span></td>
                    <td>
                        <button onclick="editLocal('docks', ${local.id})" class="btn btn-warning btn-sm mr-2">
                            ‚úèÔ∏è
                        </button>
                        <button onclick="deleteLocal('docks', ${local.id})" class="btn btn-danger btn-sm">
                            üóëÔ∏è
                        </button>
                    </td>
                </tr>
            `).join('');

            // Update summary cards
            const totalDocks = systemData.docksLocales.length;
            const ocupadosDocks = systemData.docksLocales.filter(l => l.status === 'Ocupado').length;
            const ingresosDocks = systemData.docksLocales.reduce((sum, l) => sum + l.rent, 0);
            const rentabilidadPromedio = totalDocks > 0 ? 
                Math.round(systemData.docksLocales.reduce((sum, l) => sum + l.profitability, 0) / totalDocks) : 0;

            document.getElementById('docksTotal').textContent = totalDocks;
            document.getElementById('docksOcupados').textContent = ocupadosDocks;
            document.getElementById('docksIngresos').textContent = '$' + (ingresosDocks / 1000000).toFixed(1) + 'M';
            document.getElementById('docksRentabilidad').textContent = rentabilidadPromedio + '%';
        }

        // Load expenses
        function loadExpenses() {
            // Load expense categories
            const container = document.getElementById('expenseCategories');
            const totalExpenses = systemData.expenses.reduce((sum, exp) => sum + exp.amount, 0);
            
            container.innerHTML = systemData.expenses.map(expense => `
                <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded">
                    <div class="flex justify-between items-center">
                        <div>
                            <h4 class="font-semibold">${expense.concept}</h4>
                            <p class="text-sm text-gray-600">${expense.description}</p>
                        </div>
                        <div class="text-right">
                            <span class="text-xl font-bold">$${expense.amount.toLocaleString()}</span>
                            <p class="text-sm text-gray-500">(${Math.round((expense.amount / totalExpenses) * 100)}%)</p>
                        </div>
                    </div>
                </div>
            `).join('');

            // Load expenses table
            loadExpensesTable();
        }

        // Load expenses table
        function loadExpensesTable() {
            const tbody = document.getElementById('expensesTable');
            const allLocales = [...systemData.investorLocales, ...systemData.docksLocales];
            
            tbody.innerHTML = allLocales.map(local => {
                const coefficient = (local.meters / 3000) * 100; // Example calculation
                const monthlyExpense = coefficient * 100;
                const status = Math.random() > 0.3 ? 'Pagado' : 'Pendiente';
                
                return `
                    <tr>
                        <td><strong>${local.local}</strong></td>
                        <td>${local.tenant || local.investor || '-'}</td>
                        <td>${local.meters} m¬≤</td>
                        <td>${coefficient.toFixed(2)}%</td>
                        <td>$${monthlyExpense.toFixed(0)}</td>
                        <td><span class="badge ${status === 'Pagado' ? 'badge-success' : 'badge-warning'}">${status}</span></td>
                        <td>
                            <button onclick="toggleExpenseStatus('${local.local}')" class="btn btn-primary btn-sm">
                                üëÅÔ∏è
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load operational expenses
        function loadOperationalExpenses() {
            const tbody = document.getElementById('operationalTable');
            tbody.innerHTML = systemData.operationalExpenses.map(expense => `
                <tr>
                    <td>${new Date(expense.date).toLocaleDateString('es-ES')}</td>
                    <td>${expense.concept}</td>
                    <td><span class="badge badge-info">${expense.category}</span></td>
                    <td>${expense.provider}</td>
                    <td>$${expense.amount.toLocaleString()}</td>
                    <td><span class="badge ${expense.status === 'Pagado' ? 'badge-success' : 'badge-warning'}">${expense.status}</span></td>
                    <td>
                        <button onclick="editExpense(${expense.id})" class="btn btn-warning btn-sm mr-2">
                            ‚úèÔ∏è
                        </button>
                        <button onclick="deleteExpense(${expense.id})" class="btn btn-danger btn-sm">
                            üóëÔ∏è
                        </button>
                    </td>
                </tr>
            `).join('');

            // Update budget summary
            const totalBudget = 950000;
            const totalSpent = systemData.operationalExpenses.reduce((sum, exp) => sum + exp.amount, 0);
            const available = totalBudget - totalSpent;
            const execution = Math.round((totalSpent / totalBudget) * 100);

            document.getElementById('gastado').textContent = '$' + (totalSpent / 1000).toFixed(0) + 'K';
            document.getElementById('disponible').textContent = '$' + (available / 1000).toFixed(0) + 'K';
            document.getElementById('ejecucion').textContent = execution + '%';
        }

        // Utility functions
        function getStatusBadge(status) {
            switch(status) {
                case 'Ocupado': return 'badge-success';
                case 'Libre': return 'badge-danger';
                case 'Mantenimiento': return 'badge-warning';
                default: return 'badge-info';
            }
        }

        function editLocal(type, id) {
            // Implementation for editing locals
            alert(`Editando local ${type} con ID: ${id}`);
        }

        function deleteLocal(type, id) {
            if (confirm('¬øEst√° seguro de eliminar este local?')) {
                if (type === 'investor') {
                    systemData.investorLocales = systemData.investorLocales.filter(l => l.id !== id);
                    loadInvestorLocales();
                } else {
                    systemData.docksLocales = systemData.docksLocales.filter(l => l.id !== id);
                    loadDocksLocales();
                }
                saveData();
                alert('Local eliminado exitosamente');
            }
        }

        function editExpense(id) {
            alert(`Editando gasto con ID: ${id}`);
        }

        function deleteExpense(id) {
            if (confirm('¬øEst√° seguro de eliminar este gasto?')) {
                systemData.operationalExpenses = systemData.operationalExpenses.filter(e => e.id !== id);
                saveData();
                loadOperationalExpenses();
                alert('Gasto eliminado exitosamente');
            }
        }

        function toggleExpenseStatus(localNum) {
            alert(`Ver detalle de expensa para local ${localNum}`);
        }

        function filterInvestorLocales() {
            // Implementation for filtering
            loadInvestorLocales();
        }

        function populateInvestorFilter() {
            const select = document.getElementById('filterInversor');
            const investors = [...new Set(systemData.investorLocales.map(l => l.investor))];
            
            investors.forEach(investor => {
                const option = document.createElement('option');
                option.value = investor;
                option.textContent = investor;
                select.appendChild(option);
            });
        }

        function generateExpenses() {
            alert('Generando liquidaci√≥n de expensas...\n\nLiquidaci√≥n creada exitosamente para el mes actual.');
        }

        function generateReport(type) {
            let reportData = '';
            
            switch(type) {
                case 'financial':
                    reportData = `REPORTE FINANCIERO - DOCKS DEL PUERTO TIGRE\n\n`;
                    reportData += `Total Locales: ${systemData.investorLocales.length + systemData.docksLocales.length}\n`;
                    reportData += `Ingresos Estimados: $2.5M\n`;
                    reportData += `Gastos Operativos: $785K\n`;
                    reportData += `Rentabilidad: 68%\n`;
                    break;
                case 'occupancy':
                    reportData = `REPORTE DE OCUPACI√ìN - DOCKS DEL PUERTO TIGRE\n\n`;
                    reportData += `Locales Ocupados: ${systemData.investorLocales.filter(l => l.status === 'Ocupado').length + systemData.docksLocales.filter(l => l.status === 'Ocupado').length}\n`;
                    reportData += `Locales Libres: ${systemData.investorLocales.filter(l => l.status === 'Libre').length + systemData.docksLocales.filter(l => l.status === 'Libre').length}\n`;
                    reportData += `Tasa de Ocupaci√≥n: 92%\n`;
                    break;
                case 'expenses':
                    reportData = `REPORTE DE EXPENSAS - DOCKS DEL PUERTO TIGRE\n\n`;
                    reportData += `Total Expensas: $785,000\n`;
                    reportData += `Cobrado: $520,000 (66%)\n`;
                    reportData += `Pendiente: $265,000 (34%)\n`;
                    break;
            }
            
            // Create and download report
            const blob = new Blob([reportData], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `reporte_${type}_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            alert('Reporte generado y descargado exitosamente');
        }

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.add('hidden');
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.classList.add('hidden');
                });
            }
        });

        // Auto-save data every 30 seconds
        setInterval(saveData, 30000);
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDpoYDqO%2BDXDo0ab8sUvd1g3OWnPnzm22V2GDhXltGbszp8r0OrqNefrpF2itS3ZjkLm7MIB5tPyvV3fpKGnwpApAXPPe0pnhURUj7RyAk0eZYomCmRJKVc2hq726ajrhht61lI9jWVcnueEm410bC4RxL0vDS%2F%2FWkZUfR2FNkUHXTqxdoVp9rptMJncCZXm9ly7HUEahUbz6b2xA6qBhqPtPLrqlxyloBq3drpifm018kay6icPKwFbtbbJxCyHFtRhEjmjuj3zGh9LBgctpjQNjVhuktIBYHMpCdmZCdPC6TqwvodiJjPG7InctIDTfJKB3J0vwPeiOapwkJF3nrHD1Hcmgv9w%2FhMR%2F27aJ22bUalC8dpiaGxQfk4tY479WsEkHi%2FrFsdzH1vwKxKDmzaTOVKhpMjlKaFhtb0Ver5AM0qK3%2FJAj7weiozrssELkqXiUqdYbr3JIlqSj1TqiP%2FdSMid03ZQ%2B0x38Nz6CWsQtQp5uGyzn4jerO0KbcB%2B3Ow%3D%3D";
        window.__genspark_locale = "es-ES";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDpoYDqO+DXDo0ab8sUvd1g3OWnPnzm22V2GDhXltGbszp8r0OrqNefrpF2itS3ZjkLm7MIB5tPyvV3fpKGnwpApAXPPe0pnhURUj7RyAk0eZYomCmRJKVc2hq726ajrhht61lI9jWVcnueEm410bC4RxL0vDS//WkZUfR2FNkUHXTqxdoVp9rptMJncCZXm9ly7HUEahUbz6b2xA6qBhqPtPLrqlxyloBq3drpifm018kay6icPKwFbtbbJxCyHFtRhEjmjuj3zGh9LBgctpjQNjVhuktIBYHMpCdmZCdPC6TqwvodiJjPG7InctIDTfJKB3J0vwPeiOapwkJF3nrHD1Hcmgv9w/hMR/27aJ22bUalC8dpiaGxQfk4tY479WsEkHi/rFsdzH1vwKxKDmzaTOVKhpMjlKaFhtb0Ver5AM0qK3/JAj7weiozrssELkqXiUqdYbr3JIlqSj1TqiP/dSMid03ZQ+0x38Nz6CWsQtQp5uGyzn4jerO0KbcB+3Ow==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    